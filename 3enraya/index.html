<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3 en Raya Familiar</title>
    <link rel="stylesheet" href="style.css">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet"> -->
</head>
<body>
    <!-- Pantalla Inicial -->
    <div id="pantalla-inicial">
        <button id="boton-comenzar">ğŸš€ Â¡Comenzar Juego! ğŸš€</button>
        <button id="boton-abrir-mensaje" class="boton-mensaje-abrir">âœ‰ï¸ Enviar Mensaje al Tito IvÃ¡n</button>
        <button id="boton-mostrar-reglas" class="boton-reglas-abrir">â“ Reglas del Juego</button>
    </div>

    <!-- NUEVA PANTALLA: SelecciÃ³n de Jugadores -->
    <div id="pantalla-seleccion" class="oculto seleccion-contenedor">
        <h2 id="titulo-seleccion">Selecciona a los Jugadores</h2>
        <div id="lista-jugadores-seleccion" class="grid-jugadores-seleccion">
            <!-- Los jugadores se cargarÃ¡n aquÃ­ con JavaScript -->
        </div>
        <div class="seleccion-info">
            <p>Jugador 1 (X): <span id="nombre-seleccionado-j1">Nadie</span></p>
            <p>Jugador 2 (O): <span id="nombre-seleccionado-j2">Nadie</span></p>
        </div>
        <button id="boton-confirmar-jugadores" disabled>Â¡Confirmar y Jugar!</button>
        <button id="boton-volver-inicio">Volver</button> <!-- BotÃ³n para cancelar -->
    </div>
    <!-- FIN NUEVA PANTALLA -->


    <!-- Contenedor del Juego (inicialmente oculto) -->
    <div id="juego-contenedor" class="oculto">
        <!-- Marcador Modificado -->
        <div id="marcador">
             <div class="marcador-jugador">
                <img src="" alt="Foto Jugador 1" class="foto-jugador" id="foto-j1">
                <span class="nombre-jugador" id="nombre-j1">J1</span>
                <span class="puntaje-jugador" id="puntaje-j1" data-last-score="0">0</span>
            </div>
            <span class="marcador-separador">:</span>
            <div class="marcador-jugador">
                <img src="" alt="Foto Jugador 2" class="foto-jugador" id="foto-j2">
                <span class="nombre-jugador" id="nombre-j2">J2</span>
                <span class="puntaje-jugador" id="puntaje-j2" data-last-score="0">0</span>
            </div>
        </div>
        <!-- Fin Marcador Modificado -->
        <p id="info-turno">Turno de:</p>
        <div id="tablero">
            <div class="celda" data-index="0"></div> <div class="celda" data-index="1"></div> <div class="celda" data-index="2"></div>
            <div class="celda" data-index="3"></div> <div class="celda" data-index="4"></div> <div class="celda" data-index="5"></div>
            <div class="celda" data-index="6"></div> <div class="celda" data-index="7"></div> <div class="celda" data-index="8"></div>
        </div>
        <button id="boton-reiniciar" class="oculto">ğŸ”„ Siguiente Ronda ğŸ”„</button>
        <!-- <button id="boton-nuevo-juego" class="oculto">ğŸŒŸ Nuevo Juego Completo ğŸŒŸ</button> --> <!-- Opcional, ahora "Otra vez" va a selecciÃ³n -->
    </div>

    <!-- PANTALLA: Ganador del Juego -->
    <div id="pantalla-ganador" class="oculto">
        <div class="confeti-contenedor"></div> <!-- Para posibles efectos futuros -->
        <h2 id="texto-ganador">Â¡EL GANADOR ES...!</h2>
        <img src="" alt="Foto del Ganador" id="foto-ganador" class="foto-ganador">
        <p id="nombre-ganador" class="nombre-ganador"></p>
        <div class="botones-ganador">
            <button id="boton-volver-a-jugar" class="boton-ganador boton-jugar oculto">ğŸ‰ Â¡Otra vez! ğŸ‰</button>
            <button id="boton-cerrar-ganador" class="boton-ganador boton-cerrar oculto">ğŸ  Salir</button>
        </div>
    </div>

    <!-- PANTALLA: Pregunta tipo Test -->
    <div id="pantalla-pregunta" class="oculto">
         <div class="pregunta-contenido">
            <h3 id="titulo-pregunta">Â¡Pregunta para ganar el punto!</h3>
            <p id="texto-pregunta">AquÃ­ va la pregunta...</p>
            <div id="opciones-pregunta" class="opciones-quiz"></div>
            <p id="feedback-pregunta" class="feedback-quiz oculto"></p>
        </div>
    </div>

    <!-- PANTALLA: Ejercicio Pausa Activa -->
    <div id="pantalla-ejercicio" class="oculto">
         <div class="ejercicio-contenido">
            <h2>Â¡Pausa Activa! ğŸ¤¸â€â™€ï¸ğŸ’¨</h2>
            <p id="nombre-ejercicio">Â¡A moverse!</p>
            <div id="contador-ejercicio" class="contador">15</div>
        </div>
    </div>

    <!-- Modal para Enviar Mensaje -->
    <div id="modal-mensaje" class="modal oculto">
        <div class="modal-contenido">
            <button id="boton-cerrar-mensaje" class="modal-cerrar-btn">Ã—</button>
            <h3>Escribe tu mensaje para el Tito IvÃ¡n</h3>
            <!-- AsegÃºrate de poner tu cÃ³digo Ãºnico de Formspree -->
            <form id="form-mensaje" action="https://formspree.io/f/TU_CODIGO_UNICO" method="POST">
                <div class="form-grupo">
                    <label for="remitente">Â¿QuiÃ©n eres?:</label>
                    <!-- Este select podrÃ­a llenarse dinÃ¡micamente o dejarse asÃ­ si es solo para Hugo/SaÃºl -->
                    <select name="remitente" id="remitente" required>
                        <option value="">--Selecciona--</option>
                        <option value="Hugo">Hugo</option>
                        <option value="Saul">SaÃºl</option>
                         <!-- PodrÃ­as aÃ±adir mÃ¡s opciones manualmente si quieres -->
                         <option value="Papa">PapÃ¡</option>
                         <option value="Mama">MamÃ¡</option>
                         <option value="Otro">Otro familiar</option>
                    </select>
                </div>
                <div class="form-grupo">
                    <label for="mensaje-texto">Tu mensaje:</label>
                    <textarea name="mensaje" id="mensaje-texto" rows="5" required placeholder="Escribe aquÃ­ lo que quieras decir..."></textarea>
                </div>
                <input type="hidden" name="_subject" value="Â¡Mensaje desde el 3 en Raya!">
                <input type="hidden" name="_captcha" value="false"> <!-- O configÃºralo en Formspree -->
                <button type="submit" class="boton-enviar-msg">ğŸš€ Â¡Enviar Mensaje!</button>
            </form>
            <p id="mensaje-feedback" class="mensaje-estado oculto"></p>
        </div>
    </div>

    <!-- Modal para las Reglas del Juego -->
    <div id="modal-reglas" class="modal oculto">
        <div class="modal-contenido-reglas">
            <button id="boton-cerrar-reglas" class="modal-cerrar-btn">Ã—</button>
            <h2>ğŸ“œ Â¡Reglas del Juego! ğŸ“œ</h2>
            <ul>
                <li><strong>Objetivo:</strong> Â¡Ser el primero en conseguir <strong>3 puntos</strong>!</li>
                <li><strong>CÃ³mo jugar al 3 en Raya:</strong>
                    <ul>
                        <li>Se eligen 2 jugadores al principio. El Jugador 1 usa 'X', el Jugador 2 usa 'O'.</li>
                        <li>Cada jugador pone su ficha en una casilla vacÃ­a por turnos.</li>
                        <li>Gana la ronda el primero que consiga <strong>3 fichas en lÃ­nea</strong> (horizontal, vertical o diagonal).</li>
                    </ul>
                </li>
                <li><strong>Â¡Pregunta para el Punto!:</strong>
                    <ul>
                        <li>Si ganas una ronda, Â¡aÃºn no tienes el punto!</li>
                        <li>AparecerÃ¡ una pregunta sorpresa (de elegir o Verdadero/Falso).</li>
                        <li>Si respondes <strong>correctamente</strong>, Â¡sumas <strong>1 punto</strong> al marcador!</li>
                        <li>Si fallas, Â¡no pasa nada!, pero no sumas el punto.</li>
                    </ul>
                </li>
                <li><strong>Â¡Empate = Pausa Activa!:</strong>
                    <ul>
                        <li>Si nadie gana la ronda (empate), Â¡toca moverse!</li>
                        <li>AparecerÃ¡ un <strong>ejercicio divertido</strong> con un contador de 15 segundos. Â¡Hazlo para recargar energÃ­a!</li>
                        <li>DespuÃ©s del ejercicio, se pasa a la siguiente ronda.</li>
                    </ul>
                </li>
                <li><strong>El CampeÃ³n:</strong> El primero que llegue a <strong>3 puntos</strong> en el marcador, Â¡gana el juego completo! ğŸ†</li>
            </ul>
            <p><strong>Â¡Mucha suerte y a divertirse!</strong> ğŸ˜‰</p>
        </div>
    </div>


    <!-- Scripts -->
    <script src="preguntas.js"></script> <!-- AsegÃºrate que estos archivos existen -->
    <script src="ejercicios.js"></script> <!-- AsegÃºrate que estos archivos existen -->
    <script src="script.js"></script>
</body>
</html>
